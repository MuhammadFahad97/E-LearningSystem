
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Login</title>
    
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="apple-touch-icon" sizes="76x76" href="../../assets/img/apple-icon.png">
        <link rel="icon" type="image/png" href="../../assets/img/favicon.png">
        <title>
            Jamia Tur Rasheed @Session["page"].ToString()
        </title>
        <!--     Fonts and icons     -->
        <link href="https://fonts.googleapis.com/css?family=Poppins:200,300,400,600,700,800" rel="stylesheet">
        <link href="https://use.fontawesome.com/releases/v5.0.6/css/all.css" rel="stylesheet">
        <!-- Nucleo Icons -->
        <link href="../../assets/css/nucleo-icons.css" rel="stylesheet">
        <!-- CSS Files -->
        <link href="../../assets/css/black-dashboard.css?v=1.0.0" rel="stylesheet">
        <!-- CSS Just for demo purpose, don't include it in your project -->
       <style type="text/css">
/* Chart.js */
@@-webkit-keyframes chartjs-render-animation{from{opacity:0.99}to{opacity:1}}@@keyframes chartjs-render-animation{from{opacity:0.99}to{opacity:1}}.chartjs-render-monitor{-webkit-animation:chartjs-render-animation 0.001s;animation:chartjs-render-animation 0.001s;}</style>
       
</head>
<body class="login-page">
    <style>
        #button {
            display: block;
            margin: 20px auto;
            padding: 10px 30px;
            background-color: #eee;
            border: solid #ccc 3px;
            cursor: pointer;
        }

        #overlay {
            position: fixed;
            top: 0;
            z-index: 100;
            width: 100%;
            height: 100%;
            display: none;
            background: rgba(0,0,0,0.6);
        }

        .cv-spinner {
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px #ddd solid;
            border-top: 4px #2e93e6 solid;
            border-radius: 50%;
            animation: sp-anime 0.8s infinite linear;
        }

        @@keyframes sp-anime {
            100% {
                transform: rotate(360deg);
            }
        }

        .is-hide {
            display: none;
        }
    </style>
    <!-- Navbar -->
    <div id="overlay">

        <div class="cv-spinner">
            <p id="percent">LOADING!!...</p>
            <span class="spinner"></span>
        </div>
    </div>
    <nav class="navbar navbar-expand-lg navbar-absolute navbar-transparent fixed-top" style="top: 0px; transition: all 0.5s linear 0s;">
        <div class="container-fluid">
            <div class="navbar-wrapper">
                <div class="navbar-toggle d-inline">
                    <button type="button" class="navbar-toggler">
                        <span class="navbar-toggler-bar bar1"></span>
                        <span class="navbar-toggler-bar bar2"></span>
                        <span class="navbar-toggler-bar bar3"></span>
                    </button>
                </div>
                <a class="navbar-brand" href="javascript:void(0)">Login Page</a>
            </div>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navigation" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-bar navbar-kebab"></span>
                <span class="navbar-toggler-bar navbar-kebab"></span>
                <span class="navbar-toggler-bar navbar-kebab"></span>
            </button>
            <div class="collapse navbar-collapse" id="navigation">
                <ul class="navbar-nav ml-auto">


                    <li class="nav-item ">
                        <a href="login.html" class="nav-link">
                            <i class="tim-icons icon-single-02"></i> Login
                        </a>
                    </li>


                </ul>
            </div>
        </div>
    </nav>
    <div class="modal modal-search fade" id="searchModal" tabindex="-1" role="dialog" aria-labelledby="searchModal" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <input type="text" class="form-control" id="inlineFormInputGroup" placeholder="SEARCH">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <i class="tim-icons icon-simple-remove"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>
    <!-- End Navbar -->
    <div class="wrapper wrapper-full-page ">
        <div class="full-page login-page ">
            <!--   you can change the color of the filter page using: data-color="blue | purple | green | orange | red | rose " -->
            <div class="content">
                <div class="container">
                    <div class="col-lg-4 col-md-6 ml-auto mr-auto">
                        <form class="form" id="form1">
                            <div class="card card-login card-white">
                                <div class="card-header">
                                    <img src="../../assets/img/card-primary.png" alt="">
                                    <h1 class="card-title">Log in</h1>
                                </div>
                                <div class="card-body">
                                    <div class="input-group">
                                        <div class="input-group-prepend">
                                            <div class="input-group-text">
                                                <i class="tim-icons icon-email-85"></i>
                                            </div>
                                        </div>
                                        <input required type="text" class="form-control" id="userName" placeholder="Email or Name or Cell #">
                                    </div>
                                    <div class="input-group">
                                        <div class="input-group-prepend">
                                            <div class="input-group-text">
                                                <i class="tim-icons icon-lock-circle"></i>
                                            </div>
                                        </div>
                                        <input required type="password" placeholder="Password" id="Password" class="form-control">
                                    </div>
                                </div>
                                <div class="card-footer">
                                    <button type="submit" class="btn btn-primary btn-lg btn-block mb-3">LOGIN</button>
                                    <div style="display:block" class="pull-left">


                                        <span style="color:black;text-align:center">
                                            Remember Me?
                                            <input id="remembercheck" type="checkbox" class="form-control-md" />
                                        </span>
                                    </div>
                                    <div class="pull-right">
                                        <h6>
                                            <a href="javascript:void(0)" class="link footer-link">Need Help?</a>
                                        </h6>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <footer class="footer">
                <div class="container-fluid">
                    <ul class="nav">
                        <li class="nav-item">
                            <a href="javascript:void(0)" class="nav-link">
                                Creative Tim
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="javascript:void(0)" class="nav-link">
                                About Us
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="javascript:void(0)" class="nav-link">
                                Blog
                            </a>
                        </li>
                    </ul>
                    <div class="copyright">
                        ©
                        <script>
                            document.write(new Date().getFullYear())
                        </script>2020 made with <i class="tim-icons icon-heart-2"></i> by
                        <a href="javascript:void(0)" target="_blank">Creative Tim</a> for a better web.
                    </div>
                </div>
            </footer>
        </div>
    </div>
    <!--   Core JS Files   -->
    <script src="../../assets/js/core/jquery.min.js"></script>
    <script src="../../assets/js/core/popper.min.js"></script>
    <script src="../../assets/js/core/bootstrap.min.js"></script>
    <script src="../../assets/js/plugins/perfect-scrollbar.jquery.min.js"></script>
    <script src="../../assets/js/plugins/moment.min.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="../vendors/validator/validator.js"></script>
    <script src="../vendors/validator/multifield.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@9"></script>

    <script src="../assets/js/plugins/jquery.validate.min.js"></script>
    <script>

        function setFormValidation(id) {
            $(id).validate({
                highlight: function (element) {
                    $(element).closest('.form-group').removeClass('has-success').addClass('has-danger');
                    $(element).closest('.form-check').removeClass('has-success').addClass('has-danger');
                },
                success: function (element) {
                    $(element).closest('.form-group').removeClass('has-danger').addClass('has-success');
                    $(element).closest('.form-check').removeClass('has-danger').addClass('has-success');


                },
                errorPlacement: function (error, element) {
                    $(element).closest('.form-group').append(error);
                },

            });

        }


        $(document).ready(function () {

            setFormValidation('#form1');



        });

        $("#form1").submit(function (e) {

            e.preventDefault();
            e.stopPropagation();
            console.log($("#form1").valid())
            if ($("#form1").valid() == true) {

                login_user()
            }
            else {
                Swal.fire({
                    position: 'top-end',
                    icon: 'error',
                    title: 'Form Is Not Valid!! Record Not Saved!!',
                    showConfirmButton: true,

                })
            }
        });
        function reset() {

            console.log("rset")

            $("#userName").val("");
            $("#Password").val("");


        }

        $("#reset_btn").click(function () {
            console.log("rset")
            $("#userName").val("");
            $("#Password").val("");
        });


        function login_user() {
            $("#overlay").fadeIn(300);
            console.log($("#Password").val());
            //  window.location.href = "../UserLogin/LoginAuth?userPassword=" + $("#Password").val()+"& userName=" + $("#userName").val() ;
            var checked = false;
            if ($("#remembercheck").prop("checked")) {
                checked = true;
            }



            $.ajax({
                method: "POST",

                url: " ../Login/LoginAuth",
                data: {


                    "userName": $("#userName").val(),
                    "userPassword": $("#Password").val(),
                    "is_remember": checked,
                },


                success: function (res) {
                    $("#overlay").fadeOut(300);
                    console.log(res)
                    if (res == "success") {
                        window.location.href = "../User/Index";
                        reset();
                    }

                    if (res == "success")
                        Swal.fire({
                            position: 'top-end',
                            icon: 'success',
                            title: 'Login Successfully',
                            showConfirmButton: false,
                            timer: 1500
                        });

                    else {
                        Swal.fire({
                            position: 'top-end',
                            icon: 'error',
                            title: 'Login Unsuccessful',
                            showConfirmButton: false,
                            timer: 1500
                        });


                    }

                }
            });
        }

        $("#forgotpwd").click(function () {
            var userName = $("#userName").val();

            if (userName == "") {
                $("#email_msg").replaceWith(`<small id="email_msg" style="color:red">please write your email in User Name field</small>`)
                setTimeout(function () {

                    $("#email_msg").fadeOut('slow')
                    $('#email_msg').replaceWith(`<small  id="email_msg">User name must be unique</small>`);
                }, 5000);

                window.scrollTo(0, 0);
            }
            else {
                window.location.href = "../ForgotPassword/ToRetryForgotView?userName=" + userName;
            }


        });









    </script>



</body>

</html>
